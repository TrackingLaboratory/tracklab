# TrackLab config

# The defaults list contains the files that will be used
# to create the final config file. This item *must* be
# the first element in the file.
defaults:
  - datasets:
    - dancetrack
    - sportsmot
    - posetrack21
  - eval: trackeval
  - engine: offline
  - state: no_save
  - visualization: save_videos
  - modules/bbox_detector: yolox
  - modules/pose_topdown: hrnet_posetrack18
  - modules/reid: kpr
  - modules/track: dd_sort
  - _self_

# configure dataset here:
dataset: ${datasets.dancetrack}  # FIXME difficult to erase configs under dataset.{...}

# Pipeline definition :
# - Defines the order in which the modules will be called
# - If loading a tracking state from disk, remove modules whose outputs are already provided in the loaded state
# Use 'pipeline: []' for an empty pipeline
pipeline:
  - bbox_detector
  - pose_topdown
  - reid
  - track

# Experiment name
experiment_name: "tests"

# Path definitions
data_dir: "${project_dir}/data"
model_dir: "${project_dir}/pretrained_models"

#dataset:
#  set_split_idxs:
#    train: 1
# Machine configuration
num_cores: 4
use_wandb: False
use_rich: True
job_id: ${hydra:runtime.seed}  # to be replaced by slurm job id

# Flags
test_tracking: True
print_config: False
eval_tracking: True

wandb:
  notes: "" # add some notes about the experiment here to be displayed on wandb table
  tags: []  # add tag to organize wandb experiments

# configure Hydra to use the current working directory
# and set up the output directory according to experiment_name
project_dir: "${hydra:runtime.cwd}"
hydra:
  job:
    chdir: True
  run:
    dir: "outputs/${experiment_name}/${now:%Y-%m-%d}/${now:%H-%M-%S}"
  sweep:
    dir: "multirun_outputs/${experiment_name}/${now:%Y-%m-%d}/${now:%H-%M-%S}"
